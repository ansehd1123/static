<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Extract and Format Input Names</title>
    <style>
        body {
            margin: 0;
            padding: 0 20px;
            font-family: Arial, sans-serif;
        }
        .container {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .section {
            width: 45%;
        }
        textarea {
            width: 100%;
            height: 300px;
            padding: 10px;
            box-sizing: border-box;
        }
        button {
            margin-top: 10px;
        }
        h3 {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <h2>HTML 데이터를 입력하고 버튼을 눌러 결과를 확인하세요:</h2>

    <div class="container">
        <div class="section">
            <h3>HTML 데이터 입력:</h3>
            <textarea id="htmlData" placeholder="HTML 데이터를 입력하세요...">
<form>
    <input type="text" name="username">
    <input type="password" name="password">
    <input type="email" name="email">
    <input type="hidden" name="hidden_field">
    <input type="text" name="username"> <!-- 중복 예시 -->
</form>
            </textarea>
            <br>
            <button onclick="showFormattedNames()">변환하기</button>
            <h3>변환 결과:</h3>
            <textarea id="formattedResult" readonly></textarea>
        </div>

        <div class="section">
            <h3>URL 인코딩된 데이터 입력:</h3>
            <textarea id="urlEncodedData" placeholder="URL 인코딩된 데이터를 입력하세요..."></textarea>
            <br>
            <button onclick="decodeUrlData()">디코딩하기</button>
            <h3>디코딩된 결과:</h3>
            <textarea id="decodedResult" readonly></textarea>
        </div>
    </div>

    <script>
        function showFormattedNames() {
            const htmlData = document.getElementById("htmlData").value;

            // HTML 파싱
            const parser = new DOMParser();
            const doc = parser.parseFromString(htmlData, 'text/html');

            // 모든 input[name] 추출
            const rawNames = Array.from(doc.querySelectorAll('input[name]'))
                .map(input => input.getAttribute('name'));

            // ***** 중복 제거 로직 추가 *****
            const uniqueNames = [...new Set(rawNames)];

            // '[name]=testtest' 형식으로 변환
            const formattedOutput = uniqueNames
                .map(name => `${name}=testtest`)
                .join('&');

            document.getElementById("formattedResult").value = formattedOutput;
        }

        function decodeUrlData() {
            const urlEncodedData = document.getElementById("urlEncodedData").value;

            // URL 디코딩
            const decodedUrlData = decodeURIComponent(urlEncodedData);

            document.getElementById("decodedResult").value = decodedUrlData;
        }
    </script>
</body>
</html>
